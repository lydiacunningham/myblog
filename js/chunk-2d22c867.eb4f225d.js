(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c867"],{f436:function(s,e,t){"use strict";t.r(e);var a=function(){var s=this,e=s.$createElement;s._self._c;return s._m(0)},r=[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("section",[t("h1",[s._v("Create a custom workflow for RainCatcher")]),t("p",[t("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*LQ4o1lvQqwMFGbPiCbeHXw.png?style=centerme",alt:""}})]),t("h2",[s._v("Background")]),t("p",[s._v("RainCatcher is an open source mobile enabled work force management solution. It’s real power is that it can be used to build custom workflows . RainCatcher has three applications that run together to provide the solution. The "),t("a",{attrs:{href:"https://github.com/feedhenry-raincatcher/raincatcher-server"}},[s._v("raincatcher-server")]),s._v(" that is the back end for the applications , the "),t("a",{attrs:{href:"https://github.com/feedhenry-raincatcher/raincatcher-portal"}},[s._v("raincatcher-portal")]),s._v(" that is used to administrate work orders and workflows and the "),t("a",{attrs:{href:"https://github.com/feedhenry-raincatcher/raincatcher-mobile"}},[s._v("raincatcher-mobile")]),s._v(" application that is used by end users or workers to complete work orders.")]),t("p",[s._v("This is a how to guide for creating and customising a step by editing the html templates and editing the . I will also cover adding the step to the mobile and portal application.")]),t("p",[s._v("##Getting started\nClone and install the git repos for the applications see the "),t("a",{attrs:{href:"http://raincatcher.feedhenry.io/docs/#%7Bcontext%7D-pro-running-the-demo-repositories"}},[s._v("official docs")]),s._v(" for more information. Workflows made up of steps when developing a workflow we build a step. There is a "),t("a",{attrs:{href:"https://github.com/feedhenry-raincatcher/generator-rcstep"}},[s._v("step generator application")]),s._v(" witch is attached to the RainCatcher project and will build a custom step using a basic template.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Install yoeman and step generator ")]),s._v("\nnpm install -g yo\nnpm install -g generator-rcstep\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# Starting step generator")]),s._v("\nyo rcstep\n")])]),t("p",[t("strong",[s._v("Note")]),s._v(": you need "),t("a",{attrs:{href:"https://github.com/creationix/nvm"}},[s._v("NVM")]),s._v(" installed to prevent permissions issues running yoeman\nBelow is I use rcstep generator to create a survey form step")]),t("p",[t("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*Lw5X2KEm-V5cGSbi9tPS_w.gif?style=centerme",alt:""}})]),t("p",[s._v("This is a basic template it contains a simple form which I will use as a starting point for this example . This form is made up of AngularJS directives and html templates . So I will try and explain the various elements involved. All the files for development of a step are in the "),t("strong",[s._v("lib")]),s._v(" directory. E.g.")]),t("p",[t("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*NQOxdQsyvTShBXdJc4pepQ.png?style=centerme",alt:""}})]),t("p",[s._v("In ./lib/angular/template you have two html files which are templates for a form and a result screen i.e. data entered on the form screen will be shown on the results screen.")]),t("h2",[s._v("Editing Form")]),t("p",[s._v("Below is the form template")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("\x3c!-- Title --\x3e\n"),t("span",{pre:!0,attrs:{class:"xml"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"wfm-step-row"')]),s._v(">")]),s._v("Please register details"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")])]),s._v('\n\n\x3c!-- Two field form --\x3e\n<div class="wfm-step-row" class="form-group" ng-form name="stepForm">\n\n  <md-input-container class="md-block" flex-gt-sm>\n    <label>E.g. First Name</label>\n    \x3c!-- Customise change ng-model ctrl.model to own variable --\x3e\n    <input type="text" id="title" name="title" ng-model="ctrl.model.firstName" required>\n  </md-input-container>\n\n  <md-input-container class="md-block" flex-gt-sm>\n    <label>E.g. Last Name </label>\n    <input type="text" id="title" name="title" ng-model="ctrl.model.lastName" required>\n  </md-input-container>\n  \n</div>\n\n<md-divider></md-divider>\n\n\x3c!-- Back and Continue Buttons--\x3e\n<div class="workflow-actions md-padding md-whiteframe-z4">\n  <md-button class="md-primary md-hue-1" ng-click="ctrl.back($event)">Back</md-button>\n  <md-button class="md-primary" ng-disabled="stepForm.$invalid || stepForm.$pristine" ng-click="ctrl.done($event)">Continue</md-button>\n</div>\n')])]),t("p",[s._v("The form as it exists now has two input fields for ‘First Name’ and ‘Last Name’. The form has a ‘back’ and a ‘continue’ buttons.")]),t("p",[s._v("Adding a extra field to the form is a matter of copying an existing field and modifying it. E.g. to add an email field change the label and the ng-model")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("<md-input-container "),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")])]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"md-block"')]),s._v(" flex-gt-sm>\n  "),t("span",{pre:!0,attrs:{class:"xml"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("label")]),s._v(">")]),s._v("Email"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("label")]),s._v(">")])]),s._v("\n  <input type="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"text"')]),s._v(" id="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"title"')]),s._v(" name="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"title"')]),s._v(" ng-model="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"ctrl.model.email"')]),s._v(" required>\n"),t("span",{pre:!0,attrs:{class:"xml"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("md-input-container")]),s._v(">")]),s._v("\n")])])]),t("p",[s._v("AngularJS Material have directives for forms and fields that can be used. See "),t("a",{attrs:{href:"https://material.angularjs.org/latest/demo/select"}},[s._v("Angular Demos")]),s._v(" for more examples. I have implemented a drop down below")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("<md-input-container "),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")])]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"md-block"')]),s._v(' flex-gt-sm>\n  <md-label>Select Web Language</md-label>\n  <md-select ng-model="ctrl.model.webLanguage">\n    <md-optgroup label = "Select Web Language">\n      <md-option ng-value= "item" ng-repeat="item in ctrl.webLanguages">{{item}}</md-option>\n    </md-optgroup>\n  </md-select>\n</md-input-container>\n')])]),t("p",[s._v("The step.js file in "),t("strong",[s._v("./lib/angular")]),s._v(" contains AngularJs directives which control the logic behind the form and result page. I added an array to the directive controlling the form (i.e. ngModule.directive(‘surveyForm’ ) in order to populate the drop down.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("self.webLanguages = [ "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'HTML'")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'CSS'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'JavaScript'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'Java'")]),s._v(" ];\n")])]),t("p",[s._v("See the full gist of steps.js "),t("a",{attrs:{href:"https://gist.github.com/austincunningham/5bb7c4fbc0ea5343c363d6b294a6621e"}},[s._v("here")])]),t("h2",[s._v("Editing Results")]),t("p",[s._v("The second file is the results view which shows the results of form input. For every input you have on the form you should have a results view.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v('\x3c!-- Title--\x3e\n<md-subheader>survey</md-subheader>\n\x3c!-- Two field report --\x3e\n<md-list>\n  \n  <md-list-item class="md-2-line">\n    <div class="md-list-item-text">\n      \x3c!-- Customise change model. to own variable --\x3e\n      <h3>{{model.firstName}} </h3>\n      <p>First name </p>\n    </div>\n    <md-divider></md-divider>\n  </md-list-item>\n\n  <md-list-item class="md-2-line">\n    <div class="md-list-item-text">\n      <h3>{{model.lastName}} </h3>\n      <p>Last Name</p>\n    </div>\n    <md-divider></md-divider>\n  </md-list-item>\n\n</md-list>\n')])]),t("p",[s._v("To add say the email field to the results page copy one of the existing fields and modify it see how the model.email is directly related to the forms ctrl.model.email")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("<md-list-item "),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")])]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"md-2-line"')]),s._v(">\n  "),t("span",{pre:!0,attrs:{class:"xml"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"md-list-item-text"')]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("h3")]),s._v(">")]),s._v("{{model.email}} "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("h3")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("Email"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")])]),s._v("\n  <md-divider>"),t("span",{pre:!0,attrs:{class:"xml"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("md-divider")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("md-list-item")]),s._v(">")]),s._v("\n")])])]),t("p",[s._v("To render the input from the dropdown similar to above.")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("<md-list-item "),t("span",{pre:!0,attrs:{class:"hljs-class"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("class")])]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"md-2-line"')]),s._v(">\n  "),t("span",{pre:!0,attrs:{class:"xml"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"md-list-item-text"')]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("h3")]),s._v(">")]),s._v("{{model.webLanguage}} "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("h3")]),s._v(">")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("Selected Web Language"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("p")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("div")]),s._v(">")])]),s._v("\n  <md-divider>"),t("span",{pre:!0,attrs:{class:"xml"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("md-divider")]),s._v(">")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("md-list-item")]),s._v(">")]),s._v("\n")])])]),t("p",[s._v("To build the step so they are available use")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("npm run build\n")])]),t("p",[s._v("You can use the watch command to continuously build the step while developing it")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("npm run watch\n")])]),t("h2",[s._v("Adding the step to raincatcher-portal")]),t("p",[s._v("Get your step package name and version from the package.json file in th")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-json"}},[t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"name"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"@raincatcher/step-survey"')]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"version"')]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"0.0.1"')]),s._v(",\n")])]),t("p",[s._v("Changed the directory raincatcher-portal and npm link my new step package")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("npm link @raincatcher/step-survey\n")])]),t("p",[s._v("Add step package to "),t("strong",[s._v("package.json")])]),t("p",[t("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*HEKJXSHKiujp90m_bDu9NA.png?style=centerme",alt:""}})]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("npm install\n")])]),t("p",[s._v("Add step to portal in angular.modules in "),t("strong",[s._v("src/app/main.js")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// apply a variable name to the module")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" surveyPortal = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'@raincatcher/step-survey'")]),s._v(");\n")])]),t("p",[s._v("Add step definition to angular.modules stepDefinitions array")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("stepDefinitions: [\n                    surveyPortal.definition \n                 ]\n")])]),t("p",[s._v("Also add step ngModule() in angular.modules")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("surveyPortal.ngModule()\n")])]),t("p",[s._v("Import the step scss demo/portal/src/sass/portal.scss")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("@import "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'node_modules/@raincatcher/step-survey/lib/style.scss'")]),s._v(";\n")])]),t("p",[t("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*u5rLQY8_SWx9-NrQZ4wSZQ.png?style=centerme",alt:""}})]),t("p",[s._v("Create a new workflow and create a work order from that work flow and assign it to a worker")]),t("p",[t("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*EyEnSCzfmahlCTNL9MZCvw.gif?style=centerme",alt:""}})]),t("h2",[s._v("Adding the step to raincatcher-mobile")]),t("p",[s._v("Changed the directory raincatcher-mobile and npm link my new step package")]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("npm link @raincatcher/step-survey\n")])]),t("p",[s._v("And add step package to the raincatcher-mobile package.json")]),t("p",[t("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*GRCCrzYlxFCf1xn-l7KybQ.png?style=centerme",alt:""}})]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("npm install\n")])]),t("p",[s._v("Add the step-survey to the "),t("strong",[s._v("/src/app/app.js")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// apply a variable name to the module")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" surveyMobile = "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("require")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'@raincatcher/step-survey'")]),s._v(");\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// add ngModule() for the module to angular.module array;")]),s._v("\nsurveyMobile.ngModule()\n")])]),t("p",[s._v("See the "),t("a",{attrs:{href:"https://gist.github.com/austincunningham/9d61c3022a4462d7040cf81e6d5d28af"}},[s._v("app.js")]),s._v(" gist for an example of this implementation")]),t("p",[s._v("Import the step scss for step-survey into "),t("strong",[s._v("/src/sass/app.scss")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-js"}},[s._v("@import "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'node_modules/@raincatcher/step-survey/lib/style.scss'")]),s._v(";\n")])]),t("p",[t("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*abd3WaO4BXC8N9b6h4Yhhw.png?style=centerme",alt:""}})]),t("p",[t("strong",[s._v("Note")]),s._v(": style.scss can be used to effect css style changes for the step , to change overall style for the mobile application you change app.scss")]),t("p",[s._v("We can now access the work order created on the portal on the mobile application")]),t("p",[t("img",{attrs:{src:"https://cdn-images-1.medium.com/max/800/1*g9GcVNV8KclLmhCLrviGvw.gif?style=centerme",alt:""}})]),t("p",[s._v("As you can see we can build workflows up with steps and we can customise steps to take in what ever form content we wish.")])])}],n=t("2877"),l={},p=Object(n["a"])(l,a,r,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d22c867.eb4f225d.js.map